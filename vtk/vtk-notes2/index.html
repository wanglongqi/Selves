<!doctype html>
<html class="no-js" lang="zh_CN">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>VTK学习笔记（二）</title>

    <link rel="stylesheet" type="text/css" href="https://longqi.ga/assets/css/styles_feeling_responsive.css">

  

	<script src="https://longqi.ga/assets/js/modernizr.min.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
	<script>
		WebFont.load({
			google: {
				families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ]
			}
		});
	</script>

	<noscript>
		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic%7CVolkhov' rel='stylesheet' type='text/css'>
	</noscript>


	<!-- Search Engine Optimization -->
	<meta name="description" content="VTK是一套可视化工具箱，可以用来完成复杂的3D可视化，其中提供了大量的高级可视化功能，有一些现成的库可以调用VTK完成可视化，不过如果需要更底层的实现对于库的了解也是必不可少的。">
	<meta name="google-site-verification" content="">
	<meta name="msvalidate.01" content="" >
	
	<link rel="author" href="">
	
	
	<link rel="canonical" href="https://longqi.ga/vtk/vtk-notes2/">


	<!-- Facebook Open Graph -->
	<meta property="og:title" content="VTK学习笔记（二）">
	<meta property="og:description" content="VTK是一套可视化工具箱，可以用来完成复杂的3D可视化，其中提供了大量的高级可视化功能，有一些现成的库可以调用VTK完成可视化，不过如果需要更底层的实现对于库的了解也是必不可少的。">
	<meta property="og:url" content="https://longqi.ga/vtk/vtk-notes2/">
	<meta property="og:locale" content="zh_CN">
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="Why & How">
	
	


	

	<link type="text/plain" rel="author" href="https://longqi.ga/humans.txt">

	

	

	<link rel="icon" sizes="32x32" href="https://longqi.ga/assets/img/favicon-32x32.png">

	<link rel="icon" sizes="192x192" href="https://longqi.ga/assets/img/touch-icon-192x192.png">

	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="https://longqi.ga/assets/img/apple-touch-icon-180x180-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://longqi.ga/assets/img/apple-touch-icon-152x152-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://longqi.ga/assets/img/apple-touch-icon-144x144-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://longqi.ga/assets/img/apple-touch-icon-120x120-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://longqi.ga/assets/img/apple-touch-icon-114x114-precomposed.png">

	
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://longqi.ga/assets/img/apple-touch-icon-76x76-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://longqi.ga/assets/img/apple-touch-icon-72x72-precomposed.png">

	<link rel="apple-touch-icon-precomposed" href="https://longqi.ga/assets/img/apple-touch-icon-precomposed.png">	

	<meta name="msapplication-TileImage" content="https://longqi.ga/assets/img/msapplication_tileimage.png">

	<meta name="msapplication-TileColor" content="#fabb00">


	

</head>
<body id="top-of-page" class="post-toc-left">
	
	<div id="navigation" class="sticky">
  <nav class="top-bar" role="navigation" data-topbar>
    <ul class="title-area">
      <li class="name">
      <h1 class="show-for-small-only"><a href="https://longqi.ga" class="icon-tree"> Why & How</a></h1>
    </li>
       <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
      <li class="toggle-topbar menu-icon"><a href="#"><span>导航</span></a></li>
    </ul>
    <section class="top-bar-section">

      <ul class="right">
        

              

          
          
        

              

          
          
        

              

          
          
        

              

          
          
            
            
              <li class="divider"></li>
              <li><a  href="https://longqi.ga/search/">搜索</a></li>

            
            
          
        

              

          
          
            
            
              <li class="divider"></li>
              <li><a  href="https://longqi.ga/contact/">与我联系</a></li>

            
            
          
        
        
      </ul>

      <ul class="left">
        

              

          
          

            
            
              <li><a  href="https://longqi.ga/">主页</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            

              <li class="has-dropdown">
                <a  href="https://longqi.ga/projects/">个人项目</a>

                  <ul class="dropdown">
                    

                      

                      <li><a  href="http://writetex.tk" target="_blank">WriteTeX</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          

            
            

              <li class="has-dropdown">
                <a  href="https://longqi.ga/blog/">博客</a>

                  <ul class="dropdown">
                    

                      

                      <li><a  href="https://longqi.ga/blog/archive/">文章目录</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          
        

              

          
          
        
        
      </ul>
    </section>
  </nav>
</div><!-- /#navigation -->

	

	

<div id="masthead">
	<div class="row">
		<div class="small-12 columns">
			<a id="logo" href="https://longqi.ga/" title="Why & How – Why &amp; How 崴&amp;灏">
				<img src="https://longqi.ga/assets/img/logo.png" alt="Why & How – Why &amp; How 崴&amp;灏">
			</a>
		</div><!-- /.small-12.columns -->
	</div><!-- /.row -->
</div><!-- /#masthead -->










	


<div class="row t30">
	<div class="medium-12 columns">
		<article itemscope itemtype="http://schema.org/Article">
			<header>
				

				<div itemprop="name"  class="medium-8">
					
					<h1>VTK学习笔记（二）</h1>
				</div>
			</header>


			
			<div class="medium-8">
			<p class="teaser" itemprop="description">
				VTK是一套可视化工具箱，可以用来完成复杂的3D可视化，其中提供了大量的高级可视化功能，有一些现成的库可以调用VTK完成可视化，不过如果需要更底层的实现对于库的了解也是必不可少的。
			</p>
			</div>
			

			<div itemprop="articleSection">
			
<div class="row">
<div class="medium-4 medium-push-8 columns">
    <div class="panel radius">
      <p id="toc"><strong>目录</strong></p>
<ul id="markdown-toc">
  <li><a href="#vtk" id="markdown-toc-vtk">VTK教程五：窗口交互</a></li>
  <li><a href="#vtk3d-widgets" id="markdown-toc-vtk3d-widgets">VTK教程六：3D Widgets</a></li>
  <li><a href="#section" id="markdown-toc-section">结语</a></li>
</ul>
      <hr />

      <aside>
	<div class="panel radius" id="sidebar-quote">
		<h3>庄子·养生主</h3>
		<p>
		吾生也有涯，而知也无涯。以有涯隨无涯，殆已；已而為知者，殆而已矣。為善无近名，為惡無近刑。緣督以為經，可以保身，可以全生，可以養親，可以盡年。
		</p>
	</div>
<!-- 
  <img class="b30" src="/images/bear-300x300.jpg" alt="">
	<div class="border-dotted radius b30">
		<a href="//whyhow.tk"><img src="//www.whyhow.tk/public/logo.svg" alt="姐妹站点"></a>
		<p class="text-left">
			这是本站的<a href="//whyhow.tk">姐妹站点</a>，热烈欢迎大家光临！
		</p>
	</div> -->
</aside>

    </div>
  </div><!-- /.medium-4.columns -->



<div class="medium-8 medium-pull-4 columns">

    <p><strong>接前文</strong></p>

    <h2 id="vtk">VTK教程五：窗口交互</h2>
    <p>前面所有的案例都没有交互，仅仅是渲染。这个案例终于要讨论交互了。下面是这个案例的代码：</p>

    <figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c">#!/usr/bin/env python</span>

<span class="c">#</span>
<span class="c"># This example introduces the concepts of user interaction with VTK.</span>
<span class="c"># First, a different interaction style (than the default) is defined.</span>
<span class="c"># Second, the interaction is started.</span>
<span class="c">#</span>
<span class="c">#</span>

<span class="kn">import</span> <span class="nn">vtk</span>

<span class="c">#</span>
<span class="c"># Next we create an instance of vtkConeSource and set some of its</span>
<span class="c"># properties. The instance of vtkConeSource "cone" is part of a visualization</span>
<span class="c"># pipeline (it is a source process object); it produces data (output type is</span>
<span class="c"># vtkPolyData) which other filters may process.</span>
<span class="c"># 对象还是一样的</span>
<span class="c">#</span>
<span class="n">cone</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkConeSource</span><span class="p">()</span>
<span class="n">cone</span><span class="o">.</span><span class="n">SetHeight</span><span class="p">(</span> <span class="mf">3.0</span> <span class="p">)</span>
<span class="n">cone</span><span class="o">.</span><span class="n">SetRadius</span><span class="p">(</span> <span class="mf">1.0</span> <span class="p">)</span>
<span class="n">cone</span><span class="o">.</span><span class="n">SetResolution</span><span class="p">(</span> <span class="mi">10</span> <span class="p">)</span>

<span class="c">#</span>
<span class="c"># In this example we terminate the pipeline with a mapper process object.</span>
<span class="c"># (Intermediate filters such as vtkShrinkPolyData could be inserted in</span>
<span class="c"># between the source and the mapper.)  We create an instance of</span>
<span class="c"># vtkPolyDataMapper to map the polygonal data into graphics primitives. We</span>
<span class="c"># connect the output of the cone souece to the input of this mapper.</span>
<span class="c">#</span>
<span class="n">coneMapper</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkPolyDataMapper</span><span class="p">()</span>
<span class="n">coneMapper</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">cone</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>

<span class="c">#</span>
<span class="c"># Create an actor to represent the cone. The actor orchestrates rendering of</span>
<span class="c"># the mapper's graphics primitives. An actor also refers to properties via a</span>
<span class="c"># vtkProperty instance, and includes an internal transformation matrix. We</span>
<span class="c"># set this actor's mapper to be coneMapper which we created above.</span>
<span class="c">#</span>
<span class="n">coneActor</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkActor</span><span class="p">()</span>
<span class="n">coneActor</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="n">coneMapper</span><span class="p">)</span>

<span class="c">#</span>
<span class="c"># Create the Renderer and assign actors to it. A renderer is like a</span>
<span class="c"># viewport. It is part or all of a window on the screen and it is responsible</span>
<span class="c"># for drawing the actors it has.  We also set the background color here.</span>
<span class="c">#</span>
<span class="n">ren1</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkRenderer</span><span class="p">()</span>
<span class="n">ren1</span><span class="o">.</span><span class="n">AddActor</span><span class="p">(</span><span class="n">coneActor</span><span class="p">)</span>
<span class="n">ren1</span><span class="o">.</span><span class="n">SetBackground</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">)</span>

<span class="c">#</span>
<span class="c"># Finally we create the render window which will show up on the screen</span>
<span class="c"># We put our renderer into the render window using AddRenderer. We also</span>
<span class="c"># set the size to be 300 pixels by 300.</span>
<span class="c"># 前面都是一个样的</span>
<span class="c">#</span>
<span class="n">renWin</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkRenderWindow</span><span class="p">()</span>
<span class="n">renWin</span><span class="o">.</span><span class="n">AddRenderer</span><span class="p">(</span><span class="n">ren1</span><span class="p">)</span>
<span class="n">renWin</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>

<span class="c">#</span>
<span class="c"># The vtkRenderWindowInteractor class watches for events (e.g., keypress,</span>
<span class="c"># mouse) in the vtkRenderWindow. These events are translated into</span>
<span class="c"># event invocations that VTK understands (see VTK/Common/vtkCommand.h</span>
<span class="c"># for all events that VTK processes). Then observers of these VTK</span>
<span class="c"># events can process them as appropriate.</span>
<span class="c"># 这里vtkRenderWindow没有直接Render而是交给了vtkRenderWindowInteractor来响应</span>
<span class="c"># 键盘和鼠标响应</span>
<span class="n">iren</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkRenderWindowInteractor</span><span class="p">()</span>
<span class="n">iren</span><span class="o">.</span><span class="n">SetRenderWindow</span><span class="p">(</span><span class="n">renWin</span><span class="p">)</span>

<span class="c">#</span>
<span class="c"># By default the vtkRenderWindowInteractor instantiates an instance</span>
<span class="c"># of vtkInteractorStyle. vtkInteractorStyle translates a set of events</span>
<span class="c"># it observes into operations on the camera, actors, and/or properties</span>
<span class="c"># in the vtkRenderWindow associated with the vtkRenderWinodwInteractor.</span>
<span class="c"># Here we specify a particular interactor style.</span>
<span class="c"># 默认的鼠标设置比较不适合鼠标操作，这里开发者也把响应换成vtkInteractorStyleTrackballCamera了。</span>
<span class="n">style</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkInteractorStyleTrackballCamera</span><span class="p">()</span>
<span class="n">iren</span><span class="o">.</span><span class="n">SetInteractorStyle</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

<span class="c">#</span>
<span class="c"># Unlike the previous scripts where we performed some operations and then</span>
<span class="c"># exited, here we leave an event loop running. The user can use the mouse</span>
<span class="c"># and keyboard to perform the operations on the scene according to the</span>
<span class="c"># current interaction style.</span>
<span class="c"># 交互需要一个Event loop，跟其他GUI程序是一样的</span>
<span class="c">#</span>

<span class="c">#</span>
<span class="c"># Initialize and start the event loop. Once the render window appears, mouse</span>
<span class="c"># in the window to move the camera. The Start() method executes an event</span>
<span class="c"># loop which listens to user mouse and keyboard events. Note that keypress-e</span>
<span class="c"># exits the event loop. (Look in vtkInteractorStyle.h for a summary of events, or</span>
<span class="c"># the appropriate Doxygen documentation.)</span>
<span class="c">#</span>
<span class="n">iren</span><span class="o">.</span><span class="n">Initialize</span><span class="p">()</span>
<span class="n">iren</span><span class="o">.</span><span class="n">Start</span><span class="p">()</span></code></pre></figure>

    <p>关于鼠标和键盘的操作，此处将vtkInteractorStyle和vtkInteractorStyleTrackballCamera的注释拷贝如下：</p>

    <blockquote>
      <p>@class   vtkInteractorStyle</p>

      <p>@brief   provide event-driven interface to the rendering window (defines trackball mode)</p>

      <p>vtkInteractorStyle is a base class implementing the majority of motion
control routines and defines an event driven interface to support
vtkRenderWindowInteractor. vtkRenderWindowInteractor implements
platform dependent key/mouse routing and timer control, which forwards
events in a neutral form to vtkInteractorStyle.</p>

      <p>vtkInteractorStyle implements the “joystick” style of interaction. That
is, holding down the mouse keys generates a stream of events that cause
continuous actions (e.g., rotate, translate, pan, zoom). (The class
vtkInteractorStyleTrackball implements a grab and move style.) The event
bindings for this class include the following:</p>
      <ul>
        <li>Keypress j / Keypress t: toggle between joystick (position sensitive) and
trackball (motion sensitive) styles. In joystick style, motion occurs
continuously as long as a mouse button is pressed. In trackball style,
motion occurs when the mouse button is pressed and the mouse pointer
moves.</li>
        <li>Keypress c / Keypress a: toggle between camera and actor modes. In
camera mode, mouse events affect the camera position and focal point. In
actor mode, mouse events affect the actor that is under the mouse pointer.</li>
        <li>Button 1: rotate the camera around its focal point (if camera mode) or
rotate the actor around its origin (if actor mode). The rotation is in the
direction defined from the center of the renderer’s viewport towards
the mouse position. In joystick mode, the magnitude of the rotation is
determined by the distance the mouse is from the center of the render
window.</li>
        <li>Button 2: pan the camera (if camera mode) or translate the actor (if
actor mode). In joystick mode, the direction of pan or translation is
from the center of the viewport towards the mouse position. In trackball
mode, the direction of motion is the direction the mouse moves. (Note:
with 2-button mice, pan is defined as &lt;Shift&gt;-Button 1.)</li>
        <li>Button 3: zoom the camera (if camera mode) or scale the actor (if
actor mode). Zoom in/increase scale if the mouse position is in the top
half of the viewport; zoom out/decrease scale if the mouse position is in
the bottom half. In joystick mode, the amount of zoom is controlled by the
distance of the mouse pointer from the horizontal centerline of the
window.</li>
        <li>Keypress 3: toggle the render window into and out of stereo mode. By
default, red-blue stereo pairs are created. Some systems support Crystal
Eyes LCD stereo glasses; you have to invoke SetStereoTypeToCrystalEyes()
on the rendering window.</li>
        <li>Keypress e: exit the application.</li>
        <li>Keypress f: fly to the picked point</li>
        <li>Keypress p: perform a pick operation. The render window interactor has
an internal instance of vtkCellPicker that it uses to pick.</li>
        <li>Keypress r: reset the camera view along the current view
direction. Centers the actors and moves the camera so that all actors are
visible.</li>
        <li>Keypress s: modify the representation of all actors so that they are
surfaces.</li>
        <li>Keypress u: invoke the user-defined function. Typically,
this keypress will bring up an interactor that you can type commands in.
Typing u calls UserCallBack() on the vtkRenderWindowInteractor, which
invokes a vtkCommand::UserEvent. In other words, to define a user-defined
callback, just add an observer to the vtkCommand::UserEvent on the
vtkRenderWindowInteractor object.</li>
        <li>Keypress w: modify the representation of all actors so that they are
wireframe.</li>
      </ul>

      <p>vtkInteractorStyle can be subclassed to provide new interaction styles and
a facility to override any of the default mouse/key operations which
currently handle trackball or joystick styles is provided. Note that this
class will fire a variety of events that can be watched using an observer,
such as LeftButtonPressEvent, LeftButtonReleaseEvent,
MiddleButtonPressEvent, MiddleButtonReleaseEvent, RightButtonPressEvent,
RightButtonReleaseEvent, EnterEvent, LeaveEvent, KeyPressEvent,
KeyReleaseEvent, CharEvent, ExposeEvent, ConfigureEvent, TimerEvent,
MouseMoveEvent,</p>

    </blockquote>

    <blockquote>
      <p>@class   vtkInteractorStyleTrackballCamera</p>

      <p>@brief   interactive manipulation of the camera</p>

      <p>vtkInteractorStyleTrackballCamera allows the user to interactively
manipulate (rotate, pan, etc.) the camera, the viewpoint of the scene.  In
trackball interaction, the magnitude of the mouse motion is proportional
to the camera motion associated with a particular mouse binding. For
example, small left-button motions cause small changes in the rotation of
the camera around its focal point. For a 3-button mouse, the left button
is for rotation, the right button for zooming, the middle button for
panning, and ctrl + left button for spinning.  (With fewer mouse buttons,
ctrl + shift + left button is for zooming, and shift + left button is for
panning.)</p>
    </blockquote>

    <h2 id="vtk3d-widgets">VTK教程六：3D Widgets</h2>
    <p>该教程主要演示了vtkBoxWidget，其他Widget的用法也是类似的。教程的代码如下：</p>

    <figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c">#!/usr/bin/env python</span>
<span class="c">#</span>
<span class="c"># This example introduces 3D widgets. 3D widgets take advantage of the</span>
<span class="c"># event/observer design pattern introduced previously. They typically</span>
<span class="c"># have a particular representation in the scene which can be interactively</span>
<span class="c"># selected and manipulated using the mouse and keyboard. As the widgets</span>
<span class="c"># are manipulated, they in turn invoke events such as StartInteractionEvent,</span>
<span class="c"># InteractionEvent, and EndInteractionEvent which can be used to manipulate</span>
<span class="c"># the scene that the widget is embedded in. 3D widgets work in the context</span>
<span class="c"># of the event loop which was set up in the previous example.</span>

<span class="c"># First we import the VTK Python package that will make available all</span>
<span class="c"># of the VTK commands to Python.</span>
<span class="kn">import</span> <span class="nn">vtk</span>

<span class="c"># Next we create an instance of vtkConeSource and set some of its</span>
<span class="c"># properties. The instance of vtkConeSource "cone" is part of a</span>
<span class="c"># visualization pipeline (it is a source process object); it produces</span>
<span class="c"># data (output type is vtkPolyData) which other filters may process.</span>
<span class="n">cone</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkConeSource</span><span class="p">()</span>
<span class="n">cone</span><span class="o">.</span><span class="n">SetHeight</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span>
<span class="n">cone</span><span class="o">.</span><span class="n">SetRadius</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">cone</span><span class="o">.</span><span class="n">SetResolution</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="c"># In this example we terminate the pipeline with a mapper process object.</span>
<span class="c"># (Intermediate filters such as vtkShrinkPolyData could be inserted in</span>
<span class="c"># between the source and the mapper.)  We create an instance of</span>
<span class="c"># vtkPolyDataMapper to map the polygonal data into graphics primitives. We</span>
<span class="c"># connect the output of the cone souece to the input of this mapper.</span>
<span class="n">coneMapper</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkPolyDataMapper</span><span class="p">()</span>
<span class="n">coneMapper</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">cone</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>

<span class="c"># Create an actor to represent the cone. The actor orchestrates rendering of</span>
<span class="c"># the mapper's graphics primitives. An actor also refers to properties via a</span>
<span class="c"># vtkProperty instance, and includes an internal transformation matrix. We</span>
<span class="c"># set this actor's mapper to be coneMapper which we created above.</span>
<span class="n">coneActor</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkActor</span><span class="p">()</span>
<span class="n">coneActor</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="n">coneMapper</span><span class="p">)</span>

<span class="c"># Create the Renderer and assign actors to it. A renderer is like a</span>
<span class="c"># viewport. It is part or all of a window on the screen and it is</span>
<span class="c"># responsible for drawing the actors it has.  We also set the</span>
<span class="c"># background color here.</span>
<span class="n">ren1</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkRenderer</span><span class="p">()</span>
<span class="n">ren1</span><span class="o">.</span><span class="n">AddActor</span><span class="p">(</span><span class="n">coneActor</span><span class="p">)</span>
<span class="n">ren1</span><span class="o">.</span><span class="n">SetBackground</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">)</span>

<span class="c"># Finally we create the render window which will show up on the screen</span>
<span class="c"># We put our renderer into the render window using AddRenderer. We</span>
<span class="c"># also set the size to be 300 pixels by 300.</span>
<span class="n">renWin</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkRenderWindow</span><span class="p">()</span>
<span class="n">renWin</span><span class="o">.</span><span class="n">AddRenderer</span><span class="p">(</span><span class="n">ren1</span><span class="p">)</span>
<span class="n">renWin</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>

<span class="c"># The vtkRenderWindowInteractor class watches for events (e.g., keypress,</span>
<span class="c"># mouse) in the vtkRenderWindow. These events are translated into</span>
<span class="c"># event invocations that VTK understands (see VTK/Common/vtkCommand.h</span>
<span class="c"># for all events that VTK processes). Then observers of these VTK</span>
<span class="c"># events can process them as appropriate.</span>
<span class="n">iren</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkRenderWindowInteractor</span><span class="p">()</span>
<span class="n">iren</span><span class="o">.</span><span class="n">SetRenderWindow</span><span class="p">(</span><span class="n">renWin</span><span class="p">)</span>

<span class="c"># By default the vtkRenderWindowInteractor instantiates an instance</span>
<span class="c"># of vtkInteractorStyle. vtkInteractorStyle translates a set of events</span>
<span class="c"># it observes into operations on the camera, actors, and/or properties</span>
<span class="c"># in the vtkRenderWindow associated with the vtkRenderWinodwInteractor.</span>
<span class="c"># Here we specify a particular interactor style.</span>
<span class="c"># 前面和教程五是一样的</span>
<span class="n">style</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkInteractorStyleTrackballCamera</span><span class="p">()</span>
<span class="n">iren</span><span class="o">.</span><span class="n">SetInteractorStyle</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>


<span class="c"># Here we use a vtkBoxWidget to transform the underlying coneActor (by</span>
<span class="c"># manipulating its transformation matrix). Many other types of widgets</span>
<span class="c"># are available for use, see the documentation for more details.</span>
<span class="c">#</span>
<span class="c"># The SetInteractor method is how 3D widgets are associated with the render</span>
<span class="c"># window interactor. Internally, SetInteractor sets up a bunch of callbacks</span>
<span class="c"># using the Command/Observer mechanism (AddObserver()). The place factor</span>
<span class="c"># controls the initial size of the widget with respect to the bounding box</span>
<span class="c"># of the input to the widget.</span>
<span class="c"># SetPlaceFactor 的目的是：</span>
<span class="c"># Set/Get a factor representing the scaling of the widget upon</span>
<span class="c"># placement (via the PlaceWidget() method). Normally the widget is</span>
<span class="c"># placed so that it just fits within the bounding box defined in</span>
<span class="c"># PlaceWidget(bounds). The PlaceFactor will make the widget larger</span>
<span class="c"># (PlaceFactor &gt; 1) or smaller (PlaceFactor &lt; 1). By default,</span>
<span class="c"># PlaceFactor is set to 0.5.</span>
<span class="n">boxWidget</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkBoxWidget</span><span class="p">()</span>
<span class="n">boxWidget</span><span class="o">.</span><span class="n">SetInteractor</span><span class="p">(</span><span class="n">iren</span><span class="p">)</span>
<span class="n">boxWidget</span><span class="o">.</span><span class="n">SetPlaceFactor</span><span class="p">(</span><span class="mf">1.25</span><span class="p">)</span>

<span class="c"># Place the interactor initially. The input to a 3D widget is used to</span>
<span class="c"># initially position and scale the widget. The EndInteractionEvent is</span>
<span class="c"># observed which invokes the SelectPolygons callback.</span>

<span class="c"># 下面是演示Widget的放置方法，首先需要设置SetProp3D，这是因为：</span>
<span class="c"># Specify a vtkProp3D around which to place the widget. This is not</span>
<span class="c"># required, but if supplied, it is used to initially position the</span>
<span class="c"># widget.</span>

<span class="n">boxWidget</span><span class="o">.</span><span class="n">SetProp3D</span><span class="p">(</span><span class="n">coneActor</span><span class="p">)</span>
<span class="n">boxWidget</span><span class="o">.</span><span class="n">PlaceWidget</span><span class="p">()</span>

<span class="c"># Similar to Step2/Python/Cone2.py, we define a callback for</span>
<span class="c"># interaction.  As can be seen the callback takes two arguments.  The</span>
<span class="c"># first being the object that generates the event and the second</span>
<span class="c"># argument the event name (which is a string).</span>
<span class="c">#</span>
<span class="c"># 下面的Callback是可以随便编写的，这里是将Widget的变换矩阵更新到对象。注意到</span>
<span class="c"># GetTransform的并没有返回变换矩阵，而是直接修改了参数：</span>
<span class="c"># virtual void vtkBoxWidget::GetTransform (   vtkTransform *  t   )</span>
<span class="c"># virtual</span>
<span class="c"># Retrieve a linear transform characterizing the transformation of the box.#</span>

<span class="c"># Note that the transformation is relative to where PlaceWidget was initially called. This method modifies the transform provided. The transform can be used to control the position of vtkProp3D's, as well as other transformation operations (e.g., vtkTranformPolyData).</span>

<span class="k">def</span> <span class="nf">myCallback</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">event_string</span><span class="p">):</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkTransform</span><span class="p">()</span>
    <span class="n">boxWidget</span><span class="o">.</span><span class="n">GetTransform</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="n">boxWidget</span><span class="o">.</span><span class="n">GetProp3D</span><span class="p">()</span><span class="o">.</span><span class="n">SetUserTransform</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>


<span class="c"># Now for every interaction event that is generated by the boxWidget,</span>
<span class="c"># call our callback function.</span>
<span class="c"># 建立Observer</span>
<span class="n">boxWidget</span><span class="o">.</span><span class="n">AddObserver</span><span class="p">(</span><span class="s">"InteractionEvent"</span><span class="p">,</span> <span class="n">myCallback</span><span class="p">)</span>

<span class="c"># Normally the user presses the "i" key to bring a 3D widget to</span>
<span class="c"># life. Here we will manually enable it so it appears with the cone.</span>
<span class="c"># 将Widget默认设置为开，可以按“i”键关闭</span>
<span class="n">boxWidget</span><span class="o">.</span><span class="n">On</span><span class="p">()</span>

<span class="c"># Start the event loop.</span>
<span class="n">iren</span><span class="o">.</span><span class="n">Initialize</span><span class="p">()</span>
<span class="n">iren</span><span class="o">.</span><span class="n">Start</span><span class="p">()</span></code></pre></figure>

    <p>关于BoxWidget，下面是它的解释：</p>

    <blockquote>
      <p>This 3D widget defines a region of interest that is represented by an arbitrarily oriented hexahedron with interior face angles of 90 degrees (orthogonal faces). The object creates 7 handles that can be moused on and manipulated. The first six correspond to the six faces, the seventh is in the center of the hexahedron. In addition, a bounding box outline is shown, the “faces” of which can be selected for object rotation or scaling. A nice feature of the object is that the vtkBoxWidget, like any 3D widget, will work with the current interactor style. That is, if vtkBoxWidget does not handle an event, then all other registered observers (including the interactor style) have an opportunity to process the event. Otherwise, the vtkBoxWidget will terminate the processing of the event that it handles.&gt;</p>

      <p>大意是BoxWidget有七个手柄，六个在六个面上，另一个在中心。</p>
    </blockquote>

    <blockquote>
      <p>To use this object, just invoke SetInteractor() with the argument of the method a vtkRenderWindowInteractor. You may also wish to invoke “PlaceWidget()” to initially position the widget. The interactor will act normally until the “i” key (for “interactor”) is pressed, at which point the vtkBoxWidget will appear. (See superclass documentation for information about changing this behavior.) By grabbing the six face handles (use the left mouse button), faces can be moved. By grabbing the center handle (with the left mouse button), the entire hexahedron can be translated. (Translation can also be employed by using the “shift-left-mouse-button” combination inside of the widget.) Scaling is achieved by using the right mouse button “up” the render window (makes the widget bigger) or “down” the render window (makes the widget smaller). To rotate vtkBoxWidget, pick a face (but not a face handle) and move the left mouse. (Note: the mouse button must be held down during manipulation.) Events that occur outside of the widget (i.e., no part of the widget is picked) are propagated to any other registered obsevers (such as the interaction style). Turn off the widget by pressing the “i” key again. (See the superclass documentation on key press activiation.)&gt;</p>
    </blockquote>

    <blockquote>
      <p>The vtkBoxWidget is very flexible. It can be used to select, cut, clip, or perform any other operation that depends on an implicit function (use the GetPlanes() method); or it can be used to transform objects using a linear transformation (use the GetTransform() method). Typical usage of the widget is to make use of the StartInteractionEvent, InteractionEvent, and EndInteractionEvent events. The InteractionEvent is called on mouse motion; the other two events are called on button down and button up (either left or right button).&gt;</p>
    </blockquote>

    <blockquote>
      <p>Some additional features of this class include the ability to control the rendered properties of the widget. You can set the properties of the selected and unselected representations of the parts of the widget. For example, you can set the property for the handles, faces, and outline in their normal and selected states.&gt;</p>
    </blockquote>

    <blockquote>
      <p>The box widget can be oriented by specifying a transformation matrix. This transformation is applied to the initial bounding box as defined by the PlaceWidget() method. DO NOT ASSUME that the transformation is applied to a unit box centered at the origin; this is wrong!</p>
    </blockquote>

    <h2 id="section">结语</h2>
    <p>以上就是VTK自带的六个教程，基本上涵盖VTK的基础使用。大家也能感觉到这六个案例还是比较废柴的，到最后也就只是使用了一个Widget。所以，后面我们会继续学习更深入的内容。Stay tuned!</p>

  </div></div>

<!-- 	it seems jekyll will auto close the div	</div>
				</div> -->
			</div>
			<div class="medium-8">
			
						<div id="page-meta" class="t30">
				<p>
					<!-- Look the author details up from the site config. -->
					
					<!-- Output author details if some exist. -->
					

				
				<time class="icon-calendar pr20" datetime="2017-04-22T20:20:08+08:00" itemprop="datePublished"> 2017-04-22</time>
				

				<span class="icon-archive pr20"> VTK</span>
				<br />
				<span class="pr20"><span class="icon-price-tag pr10"> Python</span> <span class="icon-price-tag pr10"> Notes</span> <span class="icon-price-tag pr10"> VTK</span> </span>
			</p>

			
			<div id="post-nav" class="row">
				
				<div class="small-5 columns"><a class="button small radius prev" href="https://longqi.ga/vtk/vtk-notes1/">&laquo; VTK学习笔记（一）</a></div><!-- /.small-4.columns -->
				
				<div class="small-2 columns text-center"><a class="radius button small" href="https://longqi.ga/blog/archive/" title="Blog 目录">目录</a></div><!-- /.small-4.columns -->
				
				<div class="small-5 columns text-right"></div><!-- /.small-4.columns -->
				
			</div>
			
			</div><!--  /.page-meta -->

			

			
						
				<h3 id="comments" class="t60">评论</h3>
			    <div id="disqus_thread"></div>
			    <script type="text/javascript">
			        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
			        var disqus_shortname = 'whyhow'; 
			        var disqus_identifier = '/vtk/vtk-notes2/';

			        /* * * DON'T EDIT BELOW THIS LINE * * */
			        (function() {
			            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			        })();
			    </script>
			    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
			



			
			</div>
		</article>
	</div><!-- /.medium-12.columns -->
</div><!-- /.row -->







	
	    <div id="up-to-top" class="row">
      <div class="small-12 columns" style="text-align: right;">
        <a class="iconfont" href="#top-of-page">&#xf108;</a>
      </div><!-- /.small-12.columns -->
    </div><!-- /.row -->


    <footer id="footer-content" class="bg-grau">
      <div id="footer">
        <div class="row">
          <div class="medium-6 large-5 columns">
            <h5 class="shadow-black">关于本站</h5>

            <p class="shadow-black">
              以生之有涯随知之无涯，殆矣，然何为，为何为。
              <a href="https://longqi.ga/info/">更多 ›</a>
            </p>
          </div><!-- /.large-6.columns -->


          <div class="small-6 medium-3 large-3 large-offset-1 columns">
            
              
                <h5 class="shadow-black">Services</h5>
              
            
              
            
              
            
              
            
              
            

              <ul class="no-bullet shadow-black">
              
                
                  <li >
                    <a href="https://longqi.ga"  title=""></a>
                  </li>
              
                
                  <li >
                    <a href="https://longqi.ga/contact/"  title="Contact">Contact</a>
                  </li>
              
                
                  <li >
                    <a href="https://longqi.ga/feed.xml"  title="Subscribe to RSS Feed">RSS</a>
                  </li>
              
                
                  <li >
                    <a href="https://longqi.ga/atom.xml"  title="Subscribe to Atom Feed">Atom</a>
                  </li>
              
                
                  <li >
                    <a href="https://longqi.ga/sitemap.xml"  title="Sitemap for Google Webmaster Tools">sitemap.xml</a>
                  </li>
              
              </ul>
          </div><!-- /.large-4.columns -->


          <div class="small-6 medium-3 large-3 columns">
            
              
                <h5 class="shadow-black">致谢</h5>
              
            
              
            
              
            
              
            
              
            

            <ul class="no-bullet shadow-black">
            
              
                <li >
                  <a href="https://longqi.ga"  title=""></a>
                </li>
            
              
                <li class="theme" >
                  <a href="http://phlow.de/" target="_blank"  title="Theme by PHLOW">Theme by PHLOW</a>
                </li>
            
              
                <li class="backend" >
                  <a href="http://jekyllrb.com/" target="_blank"  title="Power by Jekyll">Power by Jekyll</a>
                </li>
            
              
                <li class="server" >
                  <a href="http://github.com/" target="_blank"  title="Hosted on Github">Hosted on Github</a>
                </li>
            
              
                <li class="server" >
                  <a href="http://cloudflare.com/" target="_blank"  title="CDN through Cloudflare">CDN through Cloudflare</a>
                </li>
            
            </ul>
          </div><!-- /.large-3.columns -->
        </div><!-- /.row -->

      </div><!-- /#footer -->


      <div id="subfooter">
        <nav class="row">
          <section id="subfooter-left" class="small-12 medium-6 columns credits">
            
          </section>

          <section id="subfooter-right" class="small-12 medium-6 columns">
            <ul class="inline-list social-icons">
            
              <li><a href="http://github.com/wanglongqi" target="_blank" class="icon-github" title="GitHub"></a></li>
            
              <li><a href="http://whyhow.tk" target="_blank" class="icon-globe" title="Whyhow"></a></li>
            
              <li><a href="http://whyhow.tk" target="_blank" class="icon-cog" title="WriteTeX"></a></li>
            
              <li><a href="http://pyconsole.tk" target="_blank" class="icon-code" title="PyConsole"></a></li>
            
              <li><a href="https://github.com/wanglongqi/RoadProfile" target="_blank" class="icon-lab-flask" title="RoadProfile"></a></li>
            
            </ul>
          </section>
        </nav>
      </div><!-- /#subfooter -->
    </footer>

	

	


<script src="https://longqi.ga/assets/js/javascript.min.js"></script>


<script>
    $("#masthead").backstretch("/images/sundown2.jpg", {fade: 700});
    $("#masthead-with-text").backstretch("/images/sundown2.jpg", {fade: 700});
</script>



<script type="text/javascript" src="/assets/js/quote.js"></script>
<script type="text/javascript">
  $(document).ready(quoteHTML);
</script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6527820-1', 'auto');
  ga('require', 'displayfeatures');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>









</body>
</html>

